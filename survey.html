<script>
function submitSurvey() {
    const name = document.getElementById("name").value.trim();
    const destination = document.getElementById("destination").value.trim();
    const no_destination = document.getElementById("no_destination").checked ? "X" : "";

    if (!name) {
        alert("이름을 입력해주세요!");
        return;
    }

    const data = {
        title: cleanTitle,
        name,
        date_available: dayStatus,
        destination,
        no_destination
    };

    console.log("[제출 데이터]", data);

    fetch("https://izymighgwabdngivowbb.supabase.co/rest/v1/surveys", {
        method: "POST",
        headers: {
            "apikey": "sb_publishable_gnrYgb7L41g1RT2aEx0k6A_9irp_998",
            "Authorization": "Bearer sb_publishable_gnrYgb7L41g1RT2aEx0k6A_9irp_998",
            "Content-Type": "application/json",
            "Prefer": "return=minimal"
        },
        body: JSON.stringify(data)
    })
    .then(res => {
        if (res.ok) {
            alert("제출이 완료되었습니다! 😊");
        } else {
            alert("저장 실패: " + res.status);
        }
    })
    .catch(err => {
        console.error(err);
        alert("오류가 발생했습니다. 다시 시도해주세요.");
    });
}
</script>
